<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WhatsApp Clone - Chat</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- HEADER -->
  <div class="header" style="background:#075E54;color:white;padding:10px;">
    <span id="userName">User</span>

    <button onclick="logout()" style="
      float:right;
      background:red;
      color:white;
      border:none;
      padding:5px 10px;
      cursor:pointer;
    ">
      Logout
    </button>
  </div>

  <!-- CHAT AREA -->
  <div id="chatBox" style="
    height:400px;
    padding:10px;
    overflow-y:auto;
    background:#f0f0f0;
  ">
  </div>

  <!-- INPUT AREA -->
  <div style="display:flex;padding:10px;background:#eee;">
    <input id="messageInput" type="text" placeholder="Type a message"
      style="flex:1;padding:10px;">
    <button onclick="sendMessage()" style="
      padding:10px;
      background:#25D366;
      border:none;
      color:white;
    ">
      Send
    </button>
  </div>

<script>
  // Load username
  const username = localStorage.getItem("username") || "User";
  document.getElementById("userName").innerText = username;

  // Load old messages
  let messages = JSON.parse(localStorage.getItem("messages")) || [];

  messages.forEach(m => addMessage(m.sender, m.text, false));

  function sendMessage() {
    const input = document.getElementById("messageInput");
    if (input.value === "") return;

    addMessage("You", input.value, true);
    input.value = "";

    setTimeout(() => {
      addMessage("Bot", "Auto reply ðŸ¤–", true);
    }, 1000);
  }

  function addMessage(sender, text, save) {
    const chatBox = document.getElementById("chatBox");
    const div = document.createElement("div");

    div.style.margin = "5px 0";
    div.innerText = sender + ": " + text;

    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;

    if (save) {
      messages.push({ sender, text });
      localStorage.setItem("messages", JSON.stringify(messages));
    }
  }

  function logout() {
    localStorage.removeItem("username");
    localStorage.removeItem("messages");
    window.location.href = "index.html";
  }
</script>

</body>
</html>
